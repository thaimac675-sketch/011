<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8"><title>Admin - THAIPP</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <style>
        body { padding: 20px; font-family: sans-serif; }
        .box { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 10px; }
        input { display: block; width: 100%; margin: 10px 0; padding: 8px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>ĐĂNG ACC</h2>
        <input id="t" placeholder="Tiêu đề">
        <input id="img" placeholder="Link ảnh">
        <input id="pr" placeholder="Giá">
        <button onclick="saveAcc()">ĐĂNG LÊN SERVER</button>
    </div>

    <div class="box">
        <h2>CỘNG TIỀN</h2>
        <input id="user" placeholder="Tên khách">
        <input id="money" placeholder="Số tiền">
        <button onclick="addMoney()">XÁC NHẬN CỘNG</button>
    </div>

    <div class="box">
        <h2>DANH SÁCH USER</h2>
        <table id="user-table"></table>
    </div>

    <script>
        const firebaseConfig = { /* Dán Config của bạn vào đây */ };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function saveAcc() {
            const id = Date.now();
            db.ref('shop_accs/' + id).set({
                id: id,
                title: document.getElementById('t').value,
                img: document.getElementById('img').value,
                price: document.getElementById('pr').value
            }).then(() => alert("Đã đăng!"));
        }

        function addMoney() {
            const u = document.getElementById('user').value;
            const m = parseInt(document.getElementById('money').value);
            db.ref('users/' + u + '/balance').transaction(c => (c || 0) + m);
            alert("Đã cộng tiền!");
        }

        db.ref('users').on('value', (s) => {
            const data = s.val();
            let h = '<tr><th>User</th><th>Tiền</th><th>Xóa</th></tr>';
            for (let u in data) {
                h += `<tr><td>${u}</td><td>${data[u].balance}đ</td><td><button onclick="db.ref('users/${u}').remove()">Xóa</button></td></tr>`;
            }
            document.getElementById('user-table').innerHTML = h;
        });
    </script>
</body>
</html>
